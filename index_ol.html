<!doctype html>
<html lang="en">
	<head>
		<title>OpenLayers 3 example</title>
		<link rel="stylesheet" href="http://openlayers.org/en/v3.14.2/css/ol.css" type="text/css">
		<script src="http://openlayers.org/en/v3.14.2/build/ol.js" type="text/javascript"></script>
		<script src="js/pool.js"></script>
		<script src="js/app.js"></script>

		<link rel="stylesheet" type="text/css" href="style/custom.css">

	</head>

	<body>
		<div id="map" class="map"></div>

		<script type="text/javascript">
			function goHome() {
				map.getView().setCenter(ol.proj.transform([center_lon, center_lat], 'EPSG:4326', 'EPSG:3857'));
				map.getView().setZoom(initialZoom);
			}

			function addFeature(newFeature) {
				var newFeature = new ol.format.GeoJSON().readFeature(newFeature, {
					featureProjection: 'EPSG:3857'
				});

				vectorSource.addFeature(newFeature);
			}

			var styles = {
				'Point': [new ol.style.Style({
					image: new ol.style.Circle({
						fill: new ol.style.Fill({ color: [255,255,255,1] }),
						stroke: new ol.style.Stroke({ color: [0,0,255,1] }),
						radius: 16
					})
				})]
			};

			var styleFunction = function(feature, resolution) {
				return styles[feature.getGeometry().getType()];
			};

			var vectorSource = new ol.source.Vector({
				features: (new ol.format.GeoJSON()).readFeatures(features, {
					featureProjection: 'EPSG:3857'
				})
			});

			var vectorLayer = new ol.layer.Vector({
				source: vectorSource,
				style: styleFunction
			});

			var rasterLayer = new ol.layer.Tile({
				source: new ol.source.XYZ({
					url: 'https://api.tiles.mapbox.com/v4/mapbox.streets/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiYWFsYmVyaWNpbyIsImEiOiJjaWtvNXNnZHIwMDh6dnBtNng0aWc1Z2tkIn0.ud0lxs910DHjIIvhKh0nIQ',
					id: 'mapbox.streets'
				})
			});

			var map = new ol.Map({
				target: 'map',
				renderer: 'canvas',
				controls: [
				],
				layers: [
					rasterLayer,
					vectorLayer
				],
				view: new ol.View({
					center: ol.proj.fromLonLat([center_lon, center_lat]),
					maxZoom: maxZoom,
					minZoom: minZoom,
					zoom: initialZoom
				})
			});

		</script>

		<div id="foregroundContent">
			<button onclick="goHome()">Fly home</button>
			<button onclick="generateFeatures()">Generate features</button>
			<button onclick="stopGeneratingFeatures()">Stop Generating features</button>
		</div>
	</body>
</html>